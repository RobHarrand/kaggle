{
    "contents" : "library('ggplot2')\nrequire(animation)\n\n\n#air = read.csv(\"../input/3-Airplane_Crashes_Since_1908.txt\", header = T) #Load the data\n\nair = read.csv(\"3-Airplane_Crashes_Since_1908.txt\", header = T) #Load the data\n\nairfrance = air[air$Operator == 'Air France',] #Select certain only\namerican = air[air$Operator == 'American Airlines',] #Select certain only\naeroflot = air[air$Operator == 'Aeroflot',] #Select certain only\nusmil = air[air$Operator == 'Military - U.S. Air Force',] #Select certain only\nindian = air[air$Operator == 'Indian Airlines',] #Select certain only\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(airfrance$Fatalities) | is.na(airfrance$Aboard))\nairfrance = airfrance[!exc.Numbers, ]\n\nairfrance$Date = as.character(airfrance$Date) #Format the date\nairfrance$Date = as.Date(airfrance$Date, \"%m/%d/%Y\") #Format the date\nairfrance = airfrance[order(airfrance$Date),] #Reorder the data by date\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(american$Fatalities) | is.na(american$Aboard))\namerican = american[!exc.Numbers, ]\n\namerican$Date = as.character(american$Date) #Format the date\namerican$Date = as.Date(american$Date, \"%m/%d/%Y\") #Format the date\namerican = american[order(american$Date),] #Reorder the data by date\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(usmil$Fatalities) | is.na(usmil$Aboard))\nusmil = usmil[!exc.Numbers, ]\n\nusmil$Date = as.character(usmil$Date) #Format the date\nusmil$Date = as.Date(usmil$Date, \"%m/%d/%Y\") #Format the date\nusmil = usmil[order(usmil$Date),] #Reorder the data by date\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(aeroflot$Fatalities) | is.na(aeroflot$Aboard))\naeroflot = aeroflot[!exc.Numbers, ]\n\naeroflot$Date = as.character(aeroflot$Date) #Format the date\naeroflot$Date = as.Date(aeroflot$Date, \"%m/%d/%Y\") #Format the date\naeroflot = aeroflot[order(aeroflot$Date),] #Reorder the data by date\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(indian$Fatalities) | is.na(indian$Aboard))\nindian = indian[!exc.Numbers, ]\n\nindian$Date = as.character(indian$Date) #Format the date\nindian$Date = as.Date(indian$Date, \"%m/%d/%Y\") #Format the date\nindian = indian[order(indian$Date),] #Reorder the data by date\n\n\n\n#Set up run totals...\n\nrunsum_airfrance = cumsum(airfrance$Fatalities)\nrunsum_airfrance2 = cumsum(airfrance$Aboard)\nrunsum_airfrance = data.frame(cbind(runsum_airfrance, airfrance['Date']), runsum_airfrance2)\nrunsum_airfrance$Operator = 'Air France'\ncolnames(runsum_airfrance) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\nrunsum_american = cumsum(american$Fatalities)\nrunsum_american2 = cumsum(american$Aboard)\nrunsum_american = data.frame(cbind(runsum_american, american['Date']), runsum_american2)\nrunsum_american$Operator = 'American Airlines'\ncolnames(runsum_american) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\nrunsum_aeroflot = cumsum(aeroflot$Fatalities)\nrunsum_aeroflot2 = cumsum(aeroflot$Aboard)\nrunsum_aeroflot = data.frame(cbind(runsum_aeroflot, aeroflot['Date']), runsum_aeroflot2)\nrunsum_aeroflot$Operator = 'Aeroflot'\ncolnames(runsum_aeroflot) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\nrunsum_usmil = cumsum(usmil$Fatalities)\nrunsum_usmil2 = cumsum(usmil$Aboard)\nrunsum_usmil = data.frame(cbind(runsum_usmil, usmil['Date']), runsum_usmil2)\nrunsum_usmil$Operator = 'US Military'\ncolnames(runsum_usmil) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\nrunsum_indian = cumsum(indian$Fatalities)\nrunsum_indian2 = cumsum(indian$Aboard)\nrunsum_indian = data.frame(cbind(runsum_indian, indian['Date']), runsum_indian2)\nrunsum_indian$Operator = 'Indian Airlines'\ncolnames(runsum_indian) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\n#Combine and tweak the data to be plotted,\nx = rbind(runsum_airfrance, runsum_american, runsum_indian, runsum_usmil, runsum_aeroflot)\ny = data.frame(Fatalities_runsum = c(1,1,1,1), Date = c(\"1933-10-31\",\"1933-10-31\",\n            \"1933-10-31\",\"1933-10-31\"), Aboard_runsum = c(1,1,1,1), Operator = \n                c(\"Indian Airlines\", \"US Military\", \"Aeroflot\", \"American Airlines\"))\nx = rbind(x,y)\nx = x[order(x$Date),]\n\n\n#Set animation time,\nani.options(interval = 0.1, nmax = 100)\n      \ni=1\n      \n#Loop through the rows and save the gif...\nsaveGIF(while (i<dim(x)[1]) {\n          \n          print(m <- qplot(x$Date[1:i], \n                x$Aboard_runsum[1:i], \n                size = (x$Fatalities_runsum[1:i]),\n                alpha=x$Aboard_runsum[1:i],\n                main = \"Crash Data for 5 Airlines\",\n                col = x$Operator[1:i],\n                xlab = \"Date\",\n                ylab = \"No. of People Aboad (Cumulative)\", na.rm=TRUE) + theme_bw() + ylim(0,10000)  + \n                theme(panel.background = element_rect(fill = \"black\"),\n                panel.grid.major = element_blank(), panel.grid.minor = element_blank(), legend.position = c(0.25, 0.65)) +\n                scale_size_continuous(limits = c(0,8000), name = 'No. of Fatalities (Cumulative)') + \n                scale_color_discrete(name = \"Airline Operator\") + \n                scale_alpha(guide = 'none'))\n                \n          i=i+1\n          \n      }, movie.name = \"crash_ani.gif\", convert = \"convert\", ani.width = 500, \n      ani.height = 500)\n\n\n\n\n\n------------\n    \nqplot(x$Date, \n      x$Aboard_runsum, \n      size = (x$Fatalities_runsum),\n      alpha=x$Aboard_runsum,\n      main = \"Crash Data for 5 Airlines\",\n      col = x$Operator,\n      xlab = \"Date\",\n      ylab = \"No. of People Aboad (Cumulative)\", na.rm=TRUE) + theme_bw() + \ntheme(panel.background = element_rect(fill = \"black\"),\n      panel.grid.major = element_blank(), panel.grid.minor = element_blank(), legend.position = c(0.25, 0.65)) +\nscale_size_continuous(limits = c(0,8000), name = 'No. of Fatalities (Cumulative)') + \nscale_color_discrete(name = \"Airline Operator\") + \nscale_alpha(guide = 'none')\n\n\n\n",
    "created" : 1469114236476.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "619800765",
    "id" : "68ACB3B1",
    "lastKnownWriteTime" : 1469448468,
    "path" : "C:/Users/rob.harrand/Desktop/WORK/Kaggle/Air_crashes/air_crashes/air_crashes.R",
    "project_path" : "air_crashes.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}