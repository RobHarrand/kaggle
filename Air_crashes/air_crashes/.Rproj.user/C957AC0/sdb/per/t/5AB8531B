{
    "collab_server" : "",
    "contents" : "library('ggplot2')\nrequire(animation)\n\n\n\n#air = read.csv(\"../input/3-Airplane_Crashes_Since_1908.txt\", header = T) #Load the data\n\nair = read.csv(\"3-Airplane_Crashes_Since_1908.txt\", header = T) #Load the data\n\nairfrance = air[air$Operator == 'Air France',] #Select AirFrance only\namerican = air[air$Operator == 'American Airlines',] #Select AirFrance only\naeroflot = air[air$Operator == 'Aeroflot',] #Select AirFrance only\nusmil = air[air$Operator == 'Military - U.S. Air Force',] #Select AirFrance only\nindian = air[air$Operator == 'Indian Airlines',] #Select AirFrance only\n\n#test = air[air$Operator == 'FedEx',] #Select AirFrance \n\n#table(air$Operator)[order(table(air$Operator))]\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(airfrance$Fatalities) | is.na(airfrance$Aboard))\nairfrance = airfrance[!exc.Numbers, ]\n\nairfrance$Date = as.character(airfrance$Date) #Format the date\nairfrance$Date = as.Date(airfrance$Date, \"%m/%d/%Y\") #Format the date\nairfrance = airfrance[order(airfrance$Date),] #Reorder the data by date\n\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(american$Fatalities) | is.na(american$Aboard))\namerican = american[!exc.Numbers, ]\n\namerican$Date = as.character(american$Date) #Format the date\namerican$Date = as.Date(american$Date, \"%m/%d/%Y\") #Format the date\namerican = american[order(american$Date),] #Reorder the data by date\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(usmil$Fatalities) | is.na(usmil$Aboard))\nusmil = usmil[!exc.Numbers, ]\n\nusmil$Date = as.character(usmil$Date) #Format the date\nusmil$Date = as.Date(usmil$Date, \"%m/%d/%Y\") #Format the date\nusmil = usmil[order(usmil$Date),] #Reorder the data by date\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(aeroflot$Fatalities) | is.na(aeroflot$Aboard))\naeroflot = aeroflot[!exc.Numbers, ]\n\naeroflot$Date = as.character(aeroflot$Date) #Format the date\naeroflot$Date = as.Date(aeroflot$Date, \"%m/%d/%Y\") #Format the date\naeroflot = aeroflot[order(aeroflot$Date),] #Reorder the data by date\n\n\n\n#Exclude rows with missing data,\nexc.Numbers = (is.na(indian$Fatalities) | is.na(indian$Aboard))\nindian = indian[!exc.Numbers, ]\n\nindian$Date = as.character(indian$Date) #Format the date\nindian$Date = as.Date(indian$Date, \"%m/%d/%Y\") #Format the date\nindian = indian[order(indian$Date),] #Reorder the data by date\n\n\n\n\n\n\n\nrunsum_airfrance = cumsum(airfrance$Fatalities)\nrunsum_airfrance2 = cumsum(airfrance$Aboard)\nrunsum_airfrance = data.frame(cbind(runsum_airfrance, airfrance['Date']), runsum_airfrance2)\nrunsum_airfrance$Operator = 'Air France'\ncolnames(runsum_airfrance) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\n\nrunsum_american = cumsum(american$Fatalities)\nrunsum_american2 = cumsum(american$Aboard)\nrunsum_american = data.frame(cbind(runsum_american, american['Date']), runsum_american2)\nrunsum_american$Operator = 'American Airlines'\ncolnames(runsum_american) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\n\n\nrunsum_aeroflot = cumsum(aeroflot$Fatalities)\nrunsum_aeroflot2 = cumsum(aeroflot$Aboard)\nrunsum_aeroflot = data.frame(cbind(runsum_aeroflot, aeroflot['Date']), runsum_aeroflot2)\nrunsum_aeroflot$Operator = 'Aeroflot'\ncolnames(runsum_aeroflot) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\n\n\nrunsum_usmil = cumsum(usmil$Fatalities)\nrunsum_usmil2 = cumsum(usmil$Aboard)\nrunsum_usmil = data.frame(cbind(runsum_usmil, usmil['Date']), runsum_usmil2)\nrunsum_usmil$Operator = 'US Military'\ncolnames(runsum_usmil) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\n\nrunsum_indian = cumsum(indian$Fatalities)\nrunsum_indian2 = cumsum(indian$Aboard)\nrunsum_indian = data.frame(cbind(runsum_indian, indian['Date']), runsum_indian2)\nrunsum_indian$Operator = 'Indian Airlines'\ncolnames(runsum_indian) = c('Fatalities_runsum', 'Date', 'Aboard_runsum', 'Operator')\n\n\nx = rbind(runsum_airfrance, runsum_american, runsum_indian, runsum_usmil, runsum_aeroflot)\ny = data.frame(Fatalities_runsum = c(1,1,1,1), Date = c(\"1933-10-31\",\"1933-10-31\",\n            \"1933-10-31\",\"1933-10-31\"), Aboard_runsum = c(1,1,1,1), Operator = \n                c(\"Indian Airlines\", \"US Military\", \"Aeroflot\", \"American Airlines\"))\nx = rbind(x,y)\nx = x[order(x$Date),]\n\n#table(x$Operator)\n\n#Plot...\nqplot(x$Date, \n      x$Aboard_runsum, \n      size = (x$Fatalities_runsum), \n      main = \"Air France Crashes\",\n      col = x$Operator,\n      xlab = \"Date\",\n      ylab = \"No. of people aboad\", na.rm=TRUE) + theme_bw()\n      scale_size(name  =\"No. of fatalities\")\n\n#+ scale_colour_discrete(name  =\"Month\")\n\n      \n      #Set animation time,\n      ani.options(interval = 0.025)\n      \n      i=1\n      \n      #Loop through the rows and save the gif...\n      \n      saveGIF(while (i<dim(x)[1]) {\n          \n          print(m <- qplot(x$Date[1:i], \n                x$Aboard_runsum[1:i], \n                size = (x$Fatalities_runsum[1:i]), \n                main = \"Crashes\",\n                col = x$Operator[1:i],\n                xlab = \"Date\",\n                ylab = \"No. of people aboad\", na.rm=TRUE) + theme_bw() + ylim(0,10000) + \n          scale_size(name  =\"No. of fatalities\"))\n          \n          \n          #dev.off()\n          \n          #totals[i+1,] = c(runsum_brazil, runsum_argentina, runsum_colombia, runsum_dominican_republic, runsum_ecuador, runsum_el_salvador,\n          #                    runsum_guatemala, runsum_haiti, runsum_nicaragua, runsum_panama, runsum_usa, runsum_mexico)\n          \n          #Wait a while between plots,\n          ani.pause()\n          \n          i=i+1\n          \n      }, movie.name = \"crash_ani.gif\", interval = 0.025, convert = \"convert\", ani.width = 500, \n      ani.height = 350)\n      \n      ",
    "created" : 1469131313096.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1443719433",
    "id" : "5AB8531B",
    "lastKnownWriteTime" : 1469396658,
    "last_content_update" : 1469396658952,
    "path" : "~/Desktop/Kaggle/Air_crashes/air_crashes/air_crashes.R",
    "project_path" : "air_crashes.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}