{
    "contents" : "#The script uses a couple of different indicators as proxies for 'gender equality'\n#These plots are based upon average values per country across all available years\n\n#Load libraries,\nrequire(\"ggplot2\")\nrequire(animation) \n\n#Load data,\nindicators = read.csv(\"data\\\\Indicators.csv\", header = TRUE)\n\n#indicators = read.csv(\"../input/Indicators.csv\", header = T) #Load the data #Load the data (Kaggle)\n\n#Create a 'negative' dataset,\nindicators_neg = indicators[grep('(any of five reasons)', indicators$IndicatorName),]\nindicators_neg = droplevels(indicators_neg)\nindicators_neg$CountryName = as.character(indicators_neg$CountryName)\n\n#Correct some country names,\nindicators_neg$CountryName[indicators_neg$CountryName == 'Egypt, Arab Rep.'] = 'Egypt'\nindicators_neg$CountryName[indicators_neg$CountryName == 'Congo, Dem. Rep.'] = 'Democratic Republic of the Congo'\nindicators_neg$CountryName[indicators_neg$CountryName == 'Gambia, The'] = 'Gambia'\nindicators_neg$CountryName[indicators_neg$CountryName == 'Macedonia, FYR'] = 'Macedonia'\nindicators_neg$CountryName[indicators_neg$CountryName == 'Yemen, Rep.'] = 'Yemen'\n\n#Create a 'positive' dataset,\nindicators_pos = indicators[indicators$IndicatorCode == 'SG.GEN.PARL.ZS',]\nindicators_pos = droplevels(indicators_pos)\nindicators_pos$CountryName = as.character(indicators_pos$CountryName)\n\n#Correct some country names,\nindicators_pos$CountryName[indicators_pos$CountryName == 'Egypt, Arab Rep.'] = 'Egypt'\nindicators_pos$CountryName[indicators_pos$CountryName == 'Congo, Dem. Rep.'] = 'Democratic Republic of the Congo'\nindicators_pos$CountryName[indicators_pos$CountryName == 'Gambia, The'] = 'Gambia'\nindicators_pos$CountryName[indicators_pos$CountryName == 'Macedonia, FYR'] = 'Macedonia'\nindicators_pos$CountryName[indicators_pos$CountryName == 'Yemen, Rep.'] = 'Yemen'\nindicators_pos$CountryName[indicators_pos$CountryName == 'Bahamas, The'] = 'Bahamas'\nindicators_pos$CountryName[indicators_pos$CountryName == 'Venezuela, RB'] = 'Venezuela'\nindicators_pos$CountryName[indicators_pos$CountryName == 'Korea, Rep.'] = 'South Korea'\nindicators_pos$CountryName[indicators_pos$CountryName == 'Iran, Islamic Rep.'] = 'Iran'\n\n#Load the map data,\ns = map_data(\"world\")\n\n#Calculate averages,\nmeans_neg = aggregate(indicators_neg$Value, FUN = mean, by = list(indicators_neg$CountryName))\ncolnames(means_neg) = c(\"CountryName\", \"Mean\")\nmeans_neg$CountryName = as.character(means_neg$CountryName)\n\n# #Change colours,\ns$colour = 1\n\ni=1\n\nwhile (i <= length(means_neg$CountryName)) {\n    s$colour[s$region == means_neg$CountryName[i]] = means_neg[i,2]\n    i=i+1\n}\n\n\n#Load the map data,\ns2 = map_data(\"world\")\n\n#Calculate averages,\nmeans_pos = aggregate(indicators_pos$Value, FUN = mean, by = list(indicators_pos$CountryName))\ncolnames(means_pos) = c(\"CountryName\", \"Mean\")\nmeans_pos$CountryName = as.character(means_pos$CountryName)\n\n#Change colours,\ns2$colour = 1\n\ni=1\n\nwhile (i <= length(means_pos$CountryName)) {\n    s2$colour[s2$region == means_pos$CountryName[i]] = means_pos[i,2]\n    i=i+1\n}\n\n\n#Make the plots (wrapped inside the animated GIF),\ni=1\ny=1\na=c(0,0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,0.9,0.8,0.7,0.6,0.5,0.4,0.3,0.2,0.1,0)\n\nsaveGIF(while (i <= length(a)){\n\n    if (y == 1){\n     \n    print(m <- ggplot(s, aes(x=long, y=lat, group=group, fill=colour)) + #Set ggplot2\n              \n              geom_polygon(alpha=a[i]) + #Set transparency\n              \n              geom_path(data = s, aes(x=long, y=lat, group=group), colour=\"black\") + #Plot the Earth\n              \n              scale_fill_gradient(low = \"black\", high = \"firebrick1\", guide = \"colourbar\") + #Set the colours,\n              \n              theme(plot.title = element_text(size = rel(2))) + #Change the text size,\n\n              ggtitle(expression(atop(\"Gender Equality: Progress Needed\", #Add the title and subtitle\n                            atop(italic(\"Women who believe a husband is justified in beating his wife (%)\"), \"\")))))   \n    \n        i=i+1\n        \n        if (i==31) {y=2}\n        if (i==31) {i=1}\n        \n    }\n    \n    \n    if (y == 2) {\n    \n    print(m <- ggplot(s2, aes(x=long, y=lat, group=group, fill=colour)) + #Set ggplot2\n        \n        geom_polygon(alpha=a[i]) + #Set transparency\n        \n        geom_path(data = s2, aes(x=long, y=lat, group=group), colour=\"black\") + #Plot the Earth\n\n        scale_fill_gradient(low = \"black\", high = \"cyan1\", guide = \"colourbar\") + #Set the colours,\n            \n        theme(plot.title = element_text(size = rel(2))) + #Change the text size,\n\n        ggtitle(expression(atop(\"Gender Equality: Getting it right\", #Add the title and subtitle\n                                atop(italic(\"Proportion of seats held by women in national parliaments (%)\"), \"\")))))\n    \n    \n        i=i+1\n        \n    }\n    \n    \n}, movie.name = \"World-Dev.gif\", interval = 0.15, convert = \"convert\", ani.width = 800, \nani.height = 600)\n",
    "created" : 1455111252587.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4195100036",
    "id" : "8673A9FE",
    "lastKnownWriteTime" : 1455201591,
    "path" : "C:/Users/rob.harrand/Desktop/WORK/Kaggle/World-dev/World-dev/World-dev.R",
    "project_path" : "World-dev.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}