{
    "contents" : "tb_1 = read.csv('tubercolusis_from 2007_WHO.csv')\n#tb_2 = read.csv('tuberculosis_data_WHO.csv')\n\ntb_1 = read.csv(/input/tubercolusis_from 2007_WHO.csv)\n\n#require('stringr')\nrequire('ggplot2')\nrequire('animation')\n#require('maptools')\nrequire('grid')\n\n\n#Load the map data,\ns = map_data(\"world\")\n\n\ntb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV = as.character(tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV)\ntb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV = gsub(\" \", \"\", tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV)\ntb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV = as.numeric(tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV)\n\n\n\n\n\nt = as.data.frame(table(tb_1$Country))\n\nex = (t$Var1 == 'South Sudan')\nt = t[!ex,]\n\n\n\nt$y_2007 = 0\nt$y_2008 = 0\nt$y_2009 = 0\nt$y_2010 = 0\nt$y_2011 = 0\nt$y_2012 = 0\nt$y_2013 = 0\nt$y_2014 = 0\n\ni=1\n\nwhile (i<=length(t$Var1)) {\n\nt[i,3] = tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV[tb_1$Country == t[i,1] & tb_1$Year == 2007]\nt[i,4] = tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV[tb_1$Country == t[i,1] & tb_1$Year == 2008]\nt[i,5] = tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV[tb_1$Country == t[i,1] & tb_1$Year == 2009]\nt[i,6] = tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV[tb_1$Country == t[i,1] & tb_1$Year == 2010]\nt[i,7] = tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV[tb_1$Country == t[i,1] & tb_1$Year == 2011]\nt[i,8] = tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV[tb_1$Country == t[i,1] & tb_1$Year == 2012]\nt[i,9] = tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV[tb_1$Country == t[i,1] & tb_1$Year == 2013]\nt[i,10] = tb_1$Number.of.deaths.due.to.tuberculosis..excluding.HIV[tb_1$Country == t[i,1] & tb_1$Year == 2014]\n\ni=i+1\n\n}\n\nex = (t$y_2007 < 1000)\nt = t[!ex,]\n\n#Loop through the rows and save the gif...\n\n\n\nz=1\n\nc_check = data.frame(t$Var1)\nc_check$False = 0\nc_check$True = 0\n\nwhile (z <= length(t$Var1)) {\n  \n  temp = as.data.frame(table(s$region == t[z,1]))\n  c_check[z,2] = temp[1,2]\n  c_check[z,3] = temp[2,2]\n  z=z+1  \n  \n}\n\n\n\n\n\n\nt$Var1 = as.character(t$Var1)\n\nt$Var1[t$Var1 == 'Congo'] = 'Republic of Congo'\nt$Var1[t$Var1 == 'Cote d\\'Ivoire'] = 'Ivory Coast'\nt$Var1[t$Var1 == 'Democratic People\\'s Republic of Korea'] = 'North Korea'\nt$Var1[t$Var1 == 'Iran (Islamic Republic of)'] = 'Iran'\nt$Var1[t$Var1 == 'Lao People\\'s Democratic Republic'] = 'Laos'\nt$Var1[t$Var1 == 'Russian Federation'] = 'Russia'\nt$Var1[t$Var1 == 'United Republic of Tanzania'] = 'Tanzania'\nt$Var1[t$Var1 == 'Viet Nam'] = 'VietNam'\n\ntb_1$Country = as.character(tb_1$Country)\n\ntb_1$Country[tb_1$Country == 'Congo'] = 'Republic of Congo'\ntb_1$Country[tb_1$Country == 'Cote d\\'Ivoire'] = 'Ivory Coast'\ntb_1$Country[tb_1$Country == 'Democratic People\\'s Republic of Korea'] = 'North Korea'\ntb_1$Country[tb_1$Country == 'Iran (Islamic Republic of)'] = 'Iran'\ntb_1$Country[tb_1$Country == 'Lao People\\'s Democratic Republic'] = 'Laos'\ntb_1$Country[tb_1$Country == 'Russian Federation'] = 'Russia'\ntb_1$Country[tb_1$Country == 'United Republic of Tanzania'] = 'Tanzania'\ntb_1$Country[tb_1$Country == 'Viet Nam'] = 'VietNam'\n\n\n\n\ni=1\n\nwhile (i<=length(t$Var1)) {\n  \n  t[i,10] = ((t[i,10] - t[i,3]) / t[i,3]) * 100\n  t[i,9] = ((t[i,9] - t[i,3]) / t[i,3]) * 100\n  t[i,8] = ((t[i,8] - t[i,3]) / t[i,3]) * 100\n  t[i,7] = ((t[i,7] - t[i,3]) / t[i,3]) * 100\n  t[i,6] = ((t[i,6] - t[i,3]) / t[i,3]) * 100\n  t[i,5] = ((t[i,5] - t[i,3]) / t[i,3]) * 100\n  t[i,4] = ((t[i,4] - t[i,3]) / t[i,3]) * 100\n  t[i,3] = ((t[i,3] - t[i,3]) / t[i,3]) * 100\n  \n  i=i+1\n  \n}\n\n\n\n\n\n\n\n\n\ng <- rasterGrob(blues9, width=unit(1,\"npc\"), height = unit(1,\"npc\"), \n                interpolate = TRUE) \n\n\ni=1\n\nsaveGIF(while (i<=8) {\n\n  y=1\n  \n  while (y<=length(t$Var1)) {\n    \n    s$colour[t[y,1] == s$region] = (t[y,i+2])\n    y=y+1\n  }\n    \n  print(m <- ggplot(s, aes(x=long, y=lat, group=group, fill=colour)) + #Set ggplot2\n          \n          annotation_custom(g, xmin=-Inf, xmax=Inf, ymin=-Inf, ymax=Inf) +\n          \n          geom_polygon(alpha=1) + #Set transparency\n          \n          geom_path(data = s, aes(x=long, y=lat, group=group), colour=\"black\") + #Plot the Earth\n          \n          scale_fill_gradient(low = \"green\", high = \"red\", guide = \"colourbar\", limits=c(-77,77)) + #Set the colours,\n                                \n          theme(plot.title = element_text(size = rel(2)),\n                panel.grid.major = element_blank(), panel.grid.minor = element_blank()) + #Change the text size,\n          \n          ggtitle(paste(\"The Spread of TB: \", 2006+i)))\n  \n  ani.pause()\n  \n  i=i+1\n  \n}, movie.name = \"tb_ani.gif\", interval = 1.5, convert = \"convert\", ani.width = 800, \nani.height = 560)\n\n\n",
    "created" : 1470651818792.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3119719050",
    "id" : "6C541E61",
    "lastKnownWriteTime" : 1470663650,
    "path" : "C:/Users/rob.harrand/Desktop/WORK/Kaggle/TB/TB.R",
    "project_path" : "TB.R",
    "properties" : {
    },
    "relative_order" : 1,
    "source_on_save" : false,
    "type" : "r_source"
}