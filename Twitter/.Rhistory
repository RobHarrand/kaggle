tweets.all = read.csv('tweets_all.csv')
library(lubridate)
library(ggplot2)
library(dplyr)
tweets.all$Date = sapply(strsplit(tweets.all$created_at, " "), "[[", 3)
tweets.all$Date = paste(tweets.all$Date,"-12-16", sep = "")
tweets.all$Time = sapply(strsplit(tweets.all$created_at, " "), "[[", 4)
tweets.all$DateTime = paste(tweets.all$Date, tweets.all$Time)
tweets.all = read.csv('tweets_all.csv')
View(tweets.all)
tweets.all$Date = sapply(strsplit(tweets.all$created_at, " "), "[[", 3)
tweets.all = read.csv('tweets_all.csv', stringsAsFactors = F)
tweets.all$Date = sapply(strsplit(tweets.all$created_at, " "), "[[", 3)
tweets.all$Date = paste(tweets.all$Date,"-12-16", sep = "")
tweets.all$Time = sapply(strsplit(tweets.all$created_at, " "), "[[", 4)
tweets.all$DateTime = paste(tweets.all$Date, tweets.all$Time)
tweets.all$DateTime = as.POSIXct(tweets.all$DateTime, format = "%d-%m-%y %H:%M:%S")
tweets.all$Time = as.POSIXct(tweets.all$Time, format = "%H:%M:%S")
tweets.all.arranged = arrange(tweets.all, DateTime)
tweets.all.arranged$Hour = hour(tweets.all.arranged$Time)
tweets.all.arranged$Minute = minute(tweets.all.arranged$Time)
l = length(tweets.all.arranged$text)
n = floor(l / 100)
tweets.all.arranged$Time_bin = 100
k = seq(0,l,n)
i=1
while (i<length(k)) {
tweets.all.arranged$Time_bin[(k[i]:k[i+1])] = i
i=i+1
}
library(maptools)
library(animation)
#Get a world map,
data(wrld_simpl)
par(mar = c(0,0,1,0),
pin = c(4,2),
pty = "m",
xaxs = "i",
xaxt = 'n',
xpd = FALSE,
yaxs = "i",
yaxt = 'n')
i = 1
#Loop through the rows and save the gif...
saveGIF(while (i <= length(table(tweets.all.arranged$Time_bin))) {
plot(wrld_simpl, col='dark green', bg='white', border='black', ann=FALSE, axes = FALSE, main = "Good morning, Twitter!")
points(tweets.all.arranged$place_lon[tweets.all.arranged$Time_bin == i], tweets.all.arranged$place_lat[tweets.all.arranged$Time_bin == i], pch = 16, col = 'red')
temp = tweets.all.arranged$DateTime[tweets.all.arranged$Time_bin == i][1]
text(-40,110, paste("Date/Time = ", temp, " GMT"), col = "black", cex = 1.2, font = 2)
i = i+1
}, movie.name = "goodmorning.gif", img.name = "Rplot", interval = 0.1, convert = "convert", ani.width = 800,
ani.height = 800)
#Now Layer the cities on top
map <- map + geom_point(aes(x=tweets.all.arranged$place_lon, y=tweets.all.arranged$place_lat,
color=as.factor(tweets.all.arranged$Time_bin)) , size=3) + theme(legend.position="none")
map
map <- NULL
mapWorld <- borders("world", colour="black", fill="gray")
map <- ggplot() +   mapWorld
#Now Layer the cities on top
map <- map + geom_point(aes(x=tweets.all.arranged$place_lon, y=tweets.all.arranged$place_lat,
color=as.factor(tweets.all.arranged$Time_bin)) , size=3) + theme(legend.position="none")
map
?nrand
?rand
x = rnorm(50000,0,50)
plot(density(x))
?rnorm
x = rnorm(n=50000, mean=10, sd=3.9)
plot(density(x))
lines(density(y), col = 'red')
y = rnorm(n=50000, mean=20, sd=9.9)
lines(density(y), col = 'red')
plot(density(x), xlim = c(0,50))
lines(density(y), col = 'red')
set.seed(1)
x = rnorm(n=50000, mean=10, sd=3.9)
y = rnorm(n=50000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50))
lines(density(y), col = 'red')
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50))
lines(density(y), col = 'red')
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
library(twitteR)
library(ROAuth)
library(httr)
library(streamR)
install.packages('twitteR')
install.packages('ROAuth')
install.packages('streamR')
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(40,0.08,
lty=c(1,1),
lwd=c(2.5,2.5),col=c("black","red"))
legend(40,0.08,c("Control", "Treatment")
lty=c(1,1),
lwd=c(2.5,2.5),col=c("black","red"))
legend(40,0.08,c("Control", "Treatment"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
legend(30,0.08,c("Control", "Treatment"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(30,0.08,c("Control", "Treatment"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
abline(v=16.435)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(30,0.08,c("Control", "Treatment"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
abline(v=16.435, lty = 'dotted')
95th = (1.65 * 3.9) + 10
c95 = (1.65 * 3.9) + 10
cord.x = c(0,seq(0,c95,0.01),c95)
cord.y = c(0, dnorm(seq(0,c95,0.01)),0)
polygon(cord.x, cord.y, col = 'grey')
curve(dnorm(x), xlim = c(0,50), main = 'Basson et al data')
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(30,0.08,c("Control", "Treatment"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=3.9, sd=11.6)
y = rnorm(n=100000, mean=40.7, sd=117.9)
plot(density(x), xlim = c(0,50), main = 'Kanda et al data')
plot(density(x), main = 'Kanda et al data')
lines(density(y), col = 'red')
plot(density(x), xlim = c(-40,150), main = 'Kanda et al data')
lines(density(y), col = 'red')
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(30,0.08,c("Non ischaemic ‘acute abdomen’ I-FABP", "Ischaemic ‘acute abdomen’"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
legend(50,0.02,c("Non ischaemic ‘acute abdomen’ I-FABP", "Ischaemic ‘acute abdomen’"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
legend(40,0.02,c("Non ischaemic ‘acute abdomen’ I-FABP", "Ischaemic ‘acute abdomen’"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
legend(30,0.02,c("Non ischaemic ‘acute abdomen’ I-FABP", "Ischaemic ‘acute abdomen’"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
legend(20,0.02,c("Non ischaemic ‘acute abdomen’ I-FABP", "Ischaemic ‘acute abdomen’"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
legend(20,0.03,c("Non ischaemic ‘acute abdomen’ I-FABP", "Ischaemic ‘acute abdomen’"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(20,0.03,c("No ischemia", "Small bowel ischemia"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
legend(30,0.03,c("No ischemia", "Small bowel ischemia"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(30,0.03,c("No ischemia", "Small bowel ischemia"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
c95 = (1.65 * 11.6) + 3.9
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(30,0.08,c("Control", "Treatment"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
curve(dnorm(x,0,1))
curve(dnorm(x,0,1))
curve(dnorm(x,0,1),xlim=c(-3,3),main='Normal Density')
cord.x <- c(-3,seq(-3,-2,0.01),-2)
cord.y <- c(0,dnorm(seq(-3,-2,0.01)),0)
curve(dnorm(x,0,1),xlim=c(-3,3),main='Standard Normal')
polygon(cord.x,cord.y,col='skyblue')
?dnorm
curve(dnorm(x,0,1),xlim=c(-3,3),main='Standard Normal')
curve(dnorm(x,10,3.9),xlim=c(-3,3),main='Standard Normal')
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
cord.x <- c(-3,seq(-3,-2,0.01),-2)
cord.y <- c(0,dnorm(seq(0,c95,0.01)),0)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
c95 = (1.65 * 3.9) + 10
cord.x <- c(-3,seq(-3,-2,0.01),-2)
cord.y <- c(0,dnorm(seq(0,c95,0.01)),0)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
polygon(cord.x,cord.y,col='skyblue')
cord.x <- c(-3,seq(-3,-2,0.01),-2)
cord.y <- c(0,dnorm(seq(0,c95,0.01)),0)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
polygon(cord.x,cord.y,col='skyblue')
cord.x <- c(0,seq(0,c95,0.01),-2)
cord.y <- c(0,dnorm(seq(0,c95,0.01)),0)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
polygon(cord.x,cord.y,col='skyblue')
seq(0,c95,0.01)
cord.y
cord.x <- c(0,seq(0,c95,0.01),-2)
cord.y <- c(0,dnorm(seq(0,c95,0.01)),3.9)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
polygon(cord.x,cord.y,col='skyblue')
?ploygon
?polygon
cord.x <- c(0,seq(0,c95,0.01),c95)
cord.y <- c(0,dnorm(seq(0,c95,0.01)),0)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
polygon(cord.x,cord.y,col='skyblue')
cord.x <- c(0,seq(0,c95,0.01),c95)
cord.y <- c(0,dnorm(seq(0,c95,0.01)),10,3.9)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
polygon(cord.x,cord.y,col='skyblue')
cord.x <- c(0,seq(0,c95,0.01),c95)
cord.y <- c(0,dnorm(seq(0,c95,0.01)),10,3.9)
cord.x <- c(0,seq(0,c95,0.01),c95)
cord.y <- c(0,dnorm(seq(0,c95,0.01),10,3.9))
plot(cord.x, cord.y)
plot(cord.x[1:1646], cord.y)
plot(cord.x[1:1645], cord.y)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
polygon(cord.x[1:1645],cord.y,col='skyblue')
cord.y <- c(dnorm(seq(0,c95,0.01),10,3.9))
cord.x <- c(0,seq(0,c95,0.01),c95)
cord.y <- c(0,dnorm(seq(0,c95,0.01),10,3.9))
plot(cord.x[1:1645], cord.y)
plot(cord.x)
plot(cord.y)
cord.x <- seq(0,c95,0.01)
cord.y <- c(0,dnorm(seq(0,c95,0.01),10,3.9))
cord.y <- c(dnorm(seq(0,c95,0.01),10,3.9))
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
polygon(cord.x,cord.y,col='skyblue')
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(30,0.08,c("Control", "Treatment"), lty=c(1,1), lwd=c(2.5,2.5),col=c("black","red"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
shade.norm.density(0, 1, 1, 2, ‘darkblue’, 45)
shade.norm.density(0, 1, 1, 2, 'darkblue', 45)
legend(30,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,"dotted"), lwd=c(2.5,2.5),col=c("black","red","black"))
legend(30,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,2), lwd=c(2.5,2.5),col=c("black","red","black"))
legend(30,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), lwd=c(2.5,2.5),col=c("black","red","black"))
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(30,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(25,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
legend(20,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), lwd=c(2.5,2.5),col=c("black","red","black"))
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(20,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=3.9, sd=11.6)
y = rnorm(n=100000, mean=40.7, sd=117.9)
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(30,0.03,c("No ischemia", "Small bowel ischemia", "Control 95% percentile"), lty=c(1,1.3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 11.6) + 3.9
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(20,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=3.9, sd=11.6)
y = rnorm(n=100000, mean=40.7, sd=117.9)
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(30,0.03,c("No ischemia", "Small bowel ischemia", "Control 95% percentile"), lty=c(1,1.3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 11.6) + 3.9
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=3.9, sd=11.6)
y = rnorm(n=100000, mean=40.7, sd=117.9)
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(30,0.03,c("No ischemia", "Small bowel ischemia", "No ischemia 95% percentile"), lty=c(1,1.3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 11.6) + 3.9
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=10, sd=3.9)
y = rnorm(n=100000, mean=20, sd=9.9)
plot(density(x), xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
legend(20,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), bty = "n", lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=3.9, sd=11.6)
y = rnorm(n=100000, mean=40.7, sd=117.9)
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(30,0.03,c("No ischemia", "Small bowel ischemia", "No ischemia 95% percentile"), bty = "n", lty=c(1,1.3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 11.6) + 3.9
abline(v=c95, lty = 'dotted')
# ?dnorm
set.seed(1)
x = rnorm(n=100000, mean=3.9, sd=11.6)
y = rnorm(n=100000, mean=40.7, sd=117.9)
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(30,0.03,c("No ischemia", "Small bowel ischemia", "No ischemia \n95% percentile"), bty = "n", lty=c(1,1.3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 11.6) + 3.9
abline(v=c95, lty = 'dotted')
set.seed(1)
x = rnorm(n=100000, mean=3.9, sd=11.6)
y = rnorm(n=100000, mean=40.7, sd=117.9)
plot(density(x), xlim = c(-60,170), main = 'Kanda et al data')
lines(density(y), col = 'red')
legend(30,0.03,c("No ischemia", "Small bowel ischemia", "No ischemia \n95% percentile"), bty = "n", lty=c(1,1,3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 11.6) + 3.9
abline(v=c95, lty = 'dotted')
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
lines(density(y), col = 'red')
curve(dnorm(x,20,9.9), col = 'red', add = T)
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
curve(dnorm(x,20,9.9), col = 'red', add = T)
legend(20,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), bty = "n", lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
plot(dnorm(x,10,3.9), xlim = c(-60,170), main = 'Kanda et al data')
curve(dnorm(x,10,3.9), xlim = c(-60,170), main = 'Kanda et al data')
curve(dnorm(x,40.7,117.9), xlim = c(-60,170), main = 'Kanda et al data')
curve(dnorm(x,40.7,117.9), xlim = c(-60,170), main = 'Kanda et al data')
curve(dnorm(x,3.9,11.6), xlim = c(-60,170), main = 'Kanda et al data')
curve(dnorm(x,40.7,117.9), col = 'red', add = T)
#set.seed(1)
#x = rnorm(n=100000, mean=10, sd=3.9)
#y = rnorm(n=100000, mean=20, sd=9.9)
#plot(density(x), xlim = c(0,50), main = 'Basson et al data')
curve(dnorm(x,10,3.9),xlim = c(0,50), main = 'Basson et al data')
curve(dnorm(x,20,9.9), col = 'red', add = T)
legend(20,0.08,c("Control", "Treatment", "Control 95% percentile"), lty=c(1,1,3), bty = "n", lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 3.9) + 10
abline(v=c95, lty = 'dotted')
curve(dnorm(x,3.9,11.6), xlim = c(-60,170), main = 'Kanda et al data')
curve(dnorm(x,40.7,117.9), col = 'red', add = T)
legend(30,0.03,c("No ischemia", "Small bowel ischemia", "No ischemia \n95% percentile"), bty = "n", lty=c(1,1,3), lwd=c(2.5,2.5),col=c("black","red","black"))
c95 = (1.65 * 11.6) + 3.9
abline(v=c95, lty = 'dotted')
library(twitteR)
library(ROAuth)
library(httr)
library(streamR)
requestURL <- "https://api.twitter.com/oauth/request_token"
accessURL <- "https://api.twitter.com/oauth/access_token"
authURL <- "https://api.twitter.com/oauth/authorize"
consumerKey <- "WgI0Z0p5feozqtasJdyKKG0ow"
consumerSecret <- "8J87c6d5yxwig86yHdT8E5hX8GcBKWuLRzCpabNpAsYojXoOWE"
# The next two lines establish a connection to the Twitter API.
# The system will print a URL which should be copied in a browser to receive a PIN number.
# This PIN has to be entered in the R-console.
my_oauth <- OAuthFactory$new(consumerKey = consumerKey,
consumerSecret = consumerSecret,
requestURL = requestURL,
accessURL = accessURL,
authURL = authURL)
my_oauth$handshake(cainfo = system.file("CurlSSL", "cacert.pem", package = "RCurl"))
# repeat this process.
save(my_oauth, file = "my_oauth.Rdata")
load(file = "my_oauth.Rdata")
load(file = 'tweets.RData')
